window.addEventListener("load",()=>{let passwordButton=document.getElementById("password_button"),oldPassword=document.getElementById("old-password-input"),newPassword=document.getElementById("new-password-input"),newRepassword=document.getElementById("new-repassword-input");passwordButton.addEventListener("click",()=>{if(oldPassword.value&&newPassword.value&&newRepassword.value)if(newPassword.value==newRepassword.value){let body=`code=${code}&old_password=${oldPassword.value}&new_password=${newPassword.value}`;passwordButton.disabled=!0,fetch("../api/user?type=password",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:body}).then(response=>response.json()).then(data=>{200==data.response?location.href="../user":"incorrect_password"==data.response&&alertEl(!0,"请检查你旧的密码是否正确")})}else alertEl(!0,"请检查你的新密码是否重写正确")})});